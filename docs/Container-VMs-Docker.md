# 容器，虚拟机和Docker入门级介绍

## 容器和虚拟机（VMs）是什么？

容器和虚拟机它们有相似的目标：将应用程序以及它的依赖项隔离到一个自包含单元并可以运行在任何地方。

此外，容器和虚拟机消除了对物理硬件的需求，无论是能耗方面还是成本效益方面都更有效地使用计算资源。

容器和虚拟机主要的不同在于它们的架构体系。接下来让我们走近地看一看

## 虚拟机（VMs）

虚拟机本质上是模拟的真实计算机，它像真实计算机一样执行程序。虚拟机通过使用“hypervisor”运行在物理机器之上。hypervisor 是一个监视器，要么运行在主机上，要么运行在”裸机（bare-metal）“上。

让我们来解读一下术语：

**hypervisor是虚拟机是在其之上运行的一个软件、固件或硬件。**hypervisor自己是运行在被称为“主机”的物理计算机之上的。这个主机提供了虚拟机使用的资源，包括RAM和CPU。这些资源在虚拟机之间分配，可以根据需要进行分配。因此，如果一个虚拟机运行的应用程序资源更丰富，那么您可能会为这个虚拟机分配比运行在同一主机上的其他虚拟机更多的资源。

运行在主机上的虚拟机(同样使用hypervisor)也经常被称为“客户机”。**这个客户机器包含应用程序和运行该应用程序所需的任何东西(例如系统二进制文件和库)。它还携带自己的整个虚拟硬件堆栈，包括虚拟网卡、存储和CPU——这意味着它还拥有自己完整的客户操作系统。**从内部来看，客户机在行为上使用自己的专用资源作为自己的单元。从外部来看，我们知道它是由主机提供的虚拟机共享资源。

如上所述，客户机器可以在托管的或裸机的hypervisor上运行。它们之间有一些重要的区别。

首先，托管的虚拟化管理程序是在主机的操作系统上运行。 例如，一台运行OSX的计算机可以在该操作系统上安装一个虚拟机(例如VirtualBox或VMware Workstation 8)。**虚拟机不能直接访问硬件，所以它必须通过主机操作系统(在我们的例子中，是Mac的OSX)。**

托管的hypervisor的好处是底层硬件不再那么重要。主机的操作系统负责硬件驱动程序，而不是hypervisor本身，因此被认为具有更多的“硬件兼容性（hardware compatibility.）”。另一方面，这个位于硬件和操作系统之间的额外层会产生更多的资源开销，从而降低虚拟机的性能。

裸机的hypervisor环境通过直接在主机的硬件上安装和运行来解决性能问题。**因为它直接与底层硬件接口，所以它不需要运行在主机操作系统上。**在本例中，作为操作系统安装在主机服务器上的第一个东西将是hypervisor。与托管的hypervisor不同，裸机hypervisor有自己的设备驱动程序，并为任何I/O、进程或特定于操作系统的任务直接与每个组件交互。这将带来更好的性能、可伸缩性和稳定性。这里的缺点是硬件兼容性受到限制，因为管理程序只能内置一定数量的设备驱动程序。

在讨论了这么多hypervisor之后，您可能想知道为什么我们需要在虚拟机和主机之间添加这个额外的“hypervisor”层。

因为虚拟机有自己的虚拟操作系统，所以hypervisor在为虚拟机提供管理和执行这个客户操作系统的平台方面扮演着重要的角色。它允许主机共享它的资源，在客户机运行的时候可以共享其资源（It allows for host computers to share their resources amongst the virtual machines that are running as guests on top of them）。

![](./asserts/1*RKPXdVaqHRzmQ5RPBH_d-g.png)

​										虚拟机结构图

如上图所示，VMs为每个虚拟机都打包了虚拟硬件，内核（如操作系统）以及用户空间。

## 容器（Container）

与提供硬件虚拟化的虚拟机不同，容器通过抽象“用户空间”来提供操作系统级虚拟化。当我们看到“容器（container）”一词时，您就会明白我的意思了。

对于意图和目的方面，容器看起来就像一个虚拟机。例如，它们有私有的处理空间，可以root的方式执行命令，有私有的网络接口和IP地址，允许自定义路由和iptable规则，可以挂载文件系统，等等。

容器和虚拟机之间一个很大的区别是，**容器与其他容器共享主机系统的内核**（而虚拟机是每个都有自己的虚拟化操作系统）。

![](./asserts/1*V5N9gJdnToIrgAgVJTtl_w.png)

​											容器结构图

这个图向您展示了容器只打包用户空间，而不是像虚拟机那样打包内核或虚拟硬件。每个容器都有自己独立的用户空间，以允许多个容器在单个主机上运行。我们可以看到，所有操作系统级别的体系结构都在容器之间共享。唯一从头创建的部分是bins和libs。这就是容器轻量的原因。

## Docker的由来

Docker是一个基于Linux容器的开源项目。它使用Linux内核的特性，如名称空间（namespace）和控制组（control groups），在操作系统之上创建容器。

Docker已经不是什么新鲜事了;谷歌多年来一直在使用他们自己的容器技术。其他的Linux容器技术包括Solaris zone、BSD jail和LXC，这些技术已经存在很多年了。

那么，为什么Docker突然变得更受欢迎了呢（So why is Docker all of a sudden gaining steam）？

1. **易使用**：Docker能让任何人——开发人员、系统管理员、架构师和其他人——都可以更容易地利用容器，以便快速构建和测试可移植的应用程序。它允许任何人在他们的笔记本电脑上打包应用程序，而这些应用程序可以在任何公共云、私有云甚至裸机上不加修改地运行。这个口号是:“一次构建，到处运行。”
2. **速度**：Docker容器非常轻量和快速。由于容器只是运行在内核上的沙箱环境（sandboxed environments），它们占用的资源更少。你可以在几秒钟内创建和运行一个Docker容器，而虚拟机可能需要更长的时间，因为他们必须每次启动一个完整的虚拟操作系统。
3. **Docker Hub**：Docker用户也受益于Docker Hub日益丰富的生态系统，你可以把它想象成一个“Docker镜像的应用程序商店”。Docker Hub拥有由社区创建的成千上万的公共镜像，这些镜像随时可以使用。搜索满足你需求的镜像是非常容易的，几乎不需要修改就可以下拉使用。
4. **模块化和可伸缩性**：Docker可以很容易地将应用程序的功能分解成单独的容器。例如，你可能让你的Postgres数据库运行在一个容器中，Redis服务器运行在另一个容器中，而你的Node.js应用程序运行在另一个容器中。有了Docker，将这些容器链接在一起来创建你的应用程序变得更加容易，这使得将来独立地扩展或更新组件变得更加容易。

## Docker基础概念

## 

## 



## 原文链接

https://www.freecodecamp.org/news/a-beginner-friendly-introduction-to-containers-vms-and-docker-79a9e3e119b/