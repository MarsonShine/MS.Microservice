<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="450px" preserveAspectRatio="none" style="width:486px;height:450px;" version="1.1" viewBox="0 0 486 450" width="486px" zoomAndPan="magnify"><defs/><g><line style="stroke:#070D4A;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="32" x2="32" y1="36.4883" y2="443.1465"/><line style="stroke:#070D4A;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="290" x2="290" y1="36.4883" y2="443.1465"/><line style="stroke:#070D4A;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="414" x2="414" y1="36.4883" y2="443.1465"/><rect fill="#F7F8FE" height="30.4883" style="stroke:#070D4A;stroke-width:1.5;" width="54" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="12" y="25.5352">Client</text><rect fill="#F7F8FE" height="30.4883" style="stroke:#070D4A;stroke-width:1.5;" width="44" x="268" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="275" y="25.5352">blue</text><rect fill="#F7F8FE" height="30.4883" style="stroke:#070D4A;stroke-width:1.5;" width="54" x="387" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="394" y="25.5352">green</text><polygon fill="#070D4A" points="278,63.7988,288,67.7988,278,71.7988,282,67.7988" style="stroke:#070D4A;stroke-width:1.0;"/><line style="stroke:#070D4A;stroke-width:1.0;" x1="32" x2="284" y1="67.7988" y2="67.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="39" y="63.0566">getVersion("name")</text><path d="M229,80.7988 L229,135.7988 L351,135.7988 L351,90.7988 L341,80.7988 L229,80.7988 " fill="#F7F8FE" style="stroke:#070D4A;stroke-width:1.0;"/><path d="M341,80.7988 L341,90.7988 L351,90.7988 L341,80.7988 " fill="#F7F8FE" style="stroke:#070D4A;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="235" y="98.3672">key: "name"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="235" y="113.6777">value: "old",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="235" y="128.9883">version: {blue:1}</text><polygon fill="#070D4A" points="43,159.041,33,163.041,43,167.041,39,163.041" style="stroke:#070D4A;stroke-width:1.0;"/><line style="stroke:#070D4A;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="37" x2="289" y1="163.041" y2="163.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="49" y="158.2988">{blue:1}</text><polygon fill="#070D4A" points="278,188.3516,288,192.3516,278,196.3516,282,192.3516" style="stroke:#070D4A;stroke-width:1.0;"/><line style="stroke:#070D4A;stroke-width:1.0;" x1="32" x2="284" y1="192.3516" y2="192.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="39" y="187.6094">putAsPrimary("name", "new", {blue:1})</text><line style="stroke:#070D4A;stroke-width:1.0;" x1="290" x2="332" y1="221.6621" y2="221.6621"/><line style="stroke:#070D4A;stroke-width:1.0;" x1="332" x2="332" y1="221.6621" y2="234.6621"/><line style="stroke:#070D4A;stroke-width:1.0;" x1="291" x2="332" y1="234.6621" y2="234.6621"/><polygon fill="#070D4A" points="301,230.6621,291,234.6621,301,238.6621,297,234.6621" style="stroke:#070D4A;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="297" y="216.9199">incrementVersion</text><path d="M229,247.6621 L229,302.6621 L351,302.6621 L351,257.6621 L341,247.6621 L229,247.6621 " fill="#F7F8FE" style="stroke:#070D4A;stroke-width:1.0;"/><path d="M341,247.6621 L341,257.6621 L351,257.6621 L341,247.6621 " fill="#F7F8FE" style="stroke:#070D4A;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="235" y="265.2305">key: "name"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="235" y="280.541">value: "new",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="235" y="295.8516">version: {blue:2}</text><polygon fill="#070D4A" points="43,325.9043,33,329.9043,43,333.9043,39,329.9043" style="stroke:#070D4A;stroke-width:1.0;"/><line style="stroke:#070D4A;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="37" x2="289" y1="329.9043" y2="329.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="49" y="325.1621">"new", {blue:2}</text><polygon fill="#070D4A" points="402,355.2148,412,359.2148,402,363.2148,406,359.2148" style="stroke:#070D4A;stroke-width:1.0;"/><line style="stroke:#070D4A;stroke-width:1.0;" x1="32" x2="408" y1="359.2148" y2="359.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="39" y="354.4727">put("name","new", {blue:2})</text><path d="M349,372.2148 L349,427.2148 L479,427.2148 L479,382.2148 L469,372.2148 L349,372.2148 " fill="#F7F8FE" style="stroke:#070D4A;stroke-width:1.0;"/><path d="M469,372.2148 L469,382.2148 L479,382.2148 L469,372.2148 " fill="#F7F8FE" style="stroke:#070D4A;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="355" y="389.7832">key: "name"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="355" y="405.0938">value: "new",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="355" y="420.4043">version: {blue:2}}]</text><!--MD5=[d88c203974f30551755833e019995d35]
@startuml
!include ../style.puml
participant Client
Client -> blue: getVersion("name")
note over blue
  key: "name"
  value: "old",
  version: {blue:1}
end note
Client <- - blue: {blue:1}
Client -> blue: putAsPrimary("name", "new", {blue:1})
blue -> blue: incrementVersion
note over blue
  key: "name"
  value: "new",
  version: {blue:2}
end note
Client <- - blue: "new", {blue:2}
Client -> green: put("name","new", {blue:2})
note over green
  key: "name"
  value: "new",
  version: {blue:2}}]
end note
@enduml

@startuml
skinparam shadowing false
skinparam sequenceParticipant{
    BackgroundColor #F7F8FE
  BorderColor #070D4A
}
skinparam sequenceLifeLine {
   BackgroundColor #F7F8FE
  BorderColor #070D4A
}
skinparam sequence {
  ArrowColor #070D4A
}

skinparam Note {
    BackgroundColor #F7F8FE
  BorderColor #070D4A
}
skinparam Node {
    BackgroundColor #F7F8FE
  BorderColor #070D4A
}

skinparam object {
    BackgroundColor #F7F8FE
  BorderColor #070D4A
}


hide footbox
participant Client
Client -> blue: getVersion("name")
note over blue
  key: "name"
  value: "old",
  version: {blue:1}
end note
Client <- - blue: {blue:1}
Client -> blue: putAsPrimary("name", "new", {blue:1})
blue -> blue: incrementVersion
note over blue
  key: "name"
  value: "new",
  version: {blue:2}
end note
Client <- - blue: "new", {blue:2}
Client -> green: put("name","new", {blue:2})
note over green
  key: "name"
  value: "new",
  version: {blue:2}}]
end note
@enduml

PlantUML version 1.2021.5(Sun Apr 25 07:20:28 EDT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>